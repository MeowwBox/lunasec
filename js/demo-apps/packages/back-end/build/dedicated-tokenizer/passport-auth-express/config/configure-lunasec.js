"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.lunaSec = void 0;
const node_sdk_1 = require("@lunasec/node-sdk");
const auth_helpers_1 = require("./auth-helpers");
if (!process.env.SECURE_FRAME_URL) {
    throw new Error('Secure frame url env var is not set');
}
exports.lunaSec = new node_sdk_1.LunaSec({
    secureFrameURL: process.env.SECURE_FRAME_URL,
    auth: {
        secrets: { source: 'environment' },
        payloadClaims: [],
        // pluginBaseUrl: '/api', This prepends the .lunasec routes with any string you wish
        // Provide a small middleware(ours is called lunaSecSessionIdProvider) that takes in the req object and returns a promise containing a session token
        // or null if a user is not logged in.  LunaSec uses this to automatically create and verify token grants
        sessionIdProvider: auth_helpers_1.lunaSecSessionIdProvider,
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJlLWx1bmFzZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZGVkaWNhdGVkLXRva2VuaXplci9wYXNzcG9ydC1hdXRoLWV4cHJlc3MvY29uZmlnL2NvbmZpZ3VyZS1sdW5hc2VjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLGdEQUE0QztBQUU1QyxpREFBMEQ7QUFFMUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUU7SUFDakMsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0NBQ3hEO0FBRVksUUFBQSxPQUFPLEdBQUcsSUFBSSxrQkFBTyxDQUFDO0lBQ2pDLGNBQWMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQjtJQUM1QyxJQUFJLEVBQUU7UUFDSixPQUFPLEVBQUUsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFO1FBQ2xDLGFBQWEsRUFBRSxFQUFFO1FBQ2pCLG9GQUFvRjtRQUVwRixvSkFBb0o7UUFDcEoseUdBQXlHO1FBQ3pHLGlCQUFpQixFQUFFLHVDQUF3QjtLQUM1QztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEx1bmFTZWMgfSBmcm9tICdAbHVuYXNlYy9ub2RlLXNkayc7XG5cbmltcG9ydCB7IGx1bmFTZWNTZXNzaW9uSWRQcm92aWRlciB9IGZyb20gJy4vYXV0aC1oZWxwZXJzJztcblxuaWYgKCFwcm9jZXNzLmVudi5TRUNVUkVfRlJBTUVfVVJMKSB7XG4gIHRocm93IG5ldyBFcnJvcignU2VjdXJlIGZyYW1lIHVybCBlbnYgdmFyIGlzIG5vdCBzZXQnKTtcbn1cblxuZXhwb3J0IGNvbnN0IGx1bmFTZWMgPSBuZXcgTHVuYVNlYyh7XG4gIHNlY3VyZUZyYW1lVVJMOiBwcm9jZXNzLmVudi5TRUNVUkVfRlJBTUVfVVJMLFxuICBhdXRoOiB7XG4gICAgc2VjcmV0czogeyBzb3VyY2U6ICdlbnZpcm9ubWVudCcgfSxcbiAgICBwYXlsb2FkQ2xhaW1zOiBbXSxcbiAgICAvLyBwbHVnaW5CYXNlVXJsOiAnL2FwaScsIFRoaXMgcHJlcGVuZHMgdGhlIC5sdW5hc2VjIHJvdXRlcyB3aXRoIGFueSBzdHJpbmcgeW91IHdpc2hcblxuICAgIC8vIFByb3ZpZGUgYSBzbWFsbCBtaWRkbGV3YXJlKG91cnMgaXMgY2FsbGVkIGx1bmFTZWNTZXNzaW9uSWRQcm92aWRlcikgdGhhdCB0YWtlcyBpbiB0aGUgcmVxIG9iamVjdCBhbmQgcmV0dXJucyBhIHByb21pc2UgY29udGFpbmluZyBhIHNlc3Npb24gdG9rZW5cbiAgICAvLyBvciBudWxsIGlmIGEgdXNlciBpcyBub3QgbG9nZ2VkIGluLiAgTHVuYVNlYyB1c2VzIHRoaXMgdG8gYXV0b21hdGljYWxseSBjcmVhdGUgYW5kIHZlcmlmeSB0b2tlbiBncmFudHNcbiAgICBzZXNzaW9uSWRQcm92aWRlcjogbHVuYVNlY1Nlc3Npb25JZFByb3ZpZGVyLFxuICB9LFxufSk7XG4iXX0=